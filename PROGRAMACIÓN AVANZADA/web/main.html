<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Document</title>
    <link href="https://fonts.googleapis.com/css?family=Roboto+Condensed&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="main-style.css">
    <link rel="stylesheet" href="header\header-style.css">
    <link rel="stylesheet" href="css-aux\tabla-style.css">
    <link rel="stylesheet" href="paginas\modelado-bd-style.css">



    <script src="header\header-component.js" defer></script>
    <script src="js-aux\ana-lim.js" defer></script>
    <script src="js-aux\mod-bd-component.js" defer></script>
    <script src="js-aux\zoom.js" defer></script>


    <script src="js-aux\main-log.js" defer></script>

</head>
<body>
    <header-component></header-component>

    <h1>Proceso</h1>
    <br>
    <div class="process-wrapper">
        <div id="progress-bar-container">
            <ul>
                <li class="step step01 active">
                    <div class="step-inner">Análisis/limpieza de datos</div>
                </li>
                <li class="step step02">
                    <div class="step-inner">Modelado de la BD</div>
                </li>
                <li class="step step03">
                    <div class="step-inner">Carga de datos y CSV</div>
                </li>
                <li class="step step04">
                    <div class="step-inner">Consultas sobre los datos</div>
                </li>
                <li class="step step05">
                    <div class="step-inner">Conclusiones y resultados</div>
                </li>
            </ul>

            <div id="line">
                <div id="line-progress"></div>
            </div>
        </div>

        <div id="progress-content-section">
            <div class="section-content discovery active">
                <div class="analysis-content">
                    <h2>Análisis de los datos</h2>
                    <p>El proceso de análisis de datos comprende varias etapas cruciales, desde la recopilación inicial
                        hasta la limpieza, transformación, modelado y análisis efectivo. Cada una de estas etapas no
                        solo requiere el uso de herramientas y técnicas especializadas, sino también un enfoque
                        metódico y estructurado para asegurar la calidad y la relevancia de los resultados obtenidos.
                    </p>
                    <div class="data-analysis">
                        <table id="tabla-datos">

                        </table>
                    </div>
                </div>
                <div class="analysis-content">
                    <h2>Limpieza de los datos</h2>
                    <p>La limpieza de datos es un paso crítico y 
                        fundamental para garantizar la calidad y la integridad de los datos utilizados en cualquier
                        proyecto. Este proceso implica la identificación y corrección de errores, la eliminación 
                        de datos duplicados o irrelevantes, y la garantía de que los datos sean consistentes y estén completos. En nuestro proyecto, que abarca la recopilación y análisis de datos de detenidos desde 2016 hasta 2024, la limpieza de datos es esencial para obtener resultados precisos y fiables.
                    </p>
                </div>
            </div>

            <div class="section-content strategy">
                <mod-bd-component></mod-bd-component>
            </div>

            <div class="section-content creative">
                <h2>Carga de Datos y CSV</h2>
                <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec neque justo, consequat non fermentum
                    ac, tempor eu turpis. Proin nulla eros, placerat non ipsum ut, dapibus ullamcorper ex. Nulla in
                    dapibus lorem. Suspendisse vitae velit ac ante consequat placerat ut sed eros. Nullam porttitor
                    mattis mi, id fringilla ex consequat eu. Praesent pulvinar tincidunt leo et condimentum. Maecenas
                    volutpat turpis at felis egestas malesuada. Phasellus sem odio, venenatis at ex a, lacinia suscipit
                    orci.</p>

                
            </div>

            <div class="section-content production">
                <h2>Consulta sobre los Datos</h2>
                <div style="text-align: center;">
                    <div style="border: 1px solid #ccc; padding: 10px; background-color: #f0f0f0; display: inline-block; text-align: left;">
                        Aquí encontrará las Consultas de
                    </div>
                </div>
            
                <div class="analysis-content">
                    <h2>Consulta SQL</h2>
                    <div style="border: 2px solid #007BFF; border-radius: 5px; background-color: #E7F3FF; padding: 15px; color: #0056b3; font-family: monospace;">
                        <pre>
            %mysql
            SELECT 
                prov.nom_provincia AS provincia_o_zona,
                prov.media_tasa_pobreza_extrema,
                det.subinfraccion,
                COUNT(subinfracciones.subinfraccion) AS num_ocurrencias
            FROM
                detenido de
                JOIN
                    detencion det ON de.id = det.Detenido_id
                JOIN
                    subcircuito sub ON det.Subcircuito_id_subcircuito = sub.id_subcircuito
                JOIN
                    circuito cir ON sub.Circuito_id_circuito = cir.id_circuito
                JOIN
                    distrito dis ON cir.Distrito_id_distrito = dis.id_distrito
                JOIN
                    zona zon ON dis.Zona_id_zona = zon.id_zona
                JOIN
                    provincia prov ON zon.id_zona = prov.zona_id_zona
                JOIN
                    (SELECT DISTINCT subinfraccion
                     FROM detencion) AS subinfracciones ON det.subinfraccion = subinfracciones.subinfraccion
            WHERE
                de.sexo = 'MUJER'
            GROUP BY 
                prov.nom_provincia, prov.media_tasa_pobreza_extrema, det.subinfraccion
            ORDER BY 
                num_ocurrencias DESC;
                        </pre>
                    </div>
                </div>
            
                <div class="analysis-content">
                    <h2>Descripción de la Consulta</h2>
                    <p>
                        La consulta SQL selecciona y agrupa datos sobre detenciones de mujeres, incluyendo la provincia, la tasa media de pobreza extrema en esa provincia, el tipo de infracción cometida y la cantidad de veces que ocurrió cada infracción. Para lograr esto, se crean varias uniones (JOIN) entre las tablas "detenido", "detención", "subcircuito", "circuito", "distrito", "zona" y "provincia", además de una subconsulta para enumerar diferentes infracciones. Los resultados se agrupan por provincia, tasa de pobreza extrema y tipo de infracción para incluir solo a mujeres detenidas. Finalmente, los datos se ordenan de manera descendente de acuerdo con la cantidad de infracciones.
                    </p>
                </div>
            

            </div>
            

            <div class="section-content analysis">
                <h2>Conclusiones y resultados</h2>
    
                <h>Preparación y Conversión de Datos</h>
                <p>Utilizamos csvkit para convertir hojas de Excel a CSV y scripts de partición para manejar datos de múltiples años.</p>
                
                <h>Normalización de Esquemas</h>
                <p>Creamos y adaptamos esquemas específicos para asegurar consistencia en las columnas a lo largo de los diferentes años.</p>
                
                <h>Procesamiento con Spark y Python</h>
                <p>Empleamos Spark y Scala para datos iniciales, y Python con Pandas para datos más recientes, garantizando limpieza y transformación de datos para compatibilidad.</p>
                
                <h>Uso del Formato Parquet</h>
                <p>Implementamos Parquet para almacenamiento eficiente y rápido acceso a los datos unificados.</p>
                
                <h>Diseño Conceptual y Lógico</h>
                <p>Elaboramos un Modelo Entidad-Relación (E-R) y lo transformamos en un Modelo Relacional para estructurar la base de datos.</p>
                
                <h>Generación e Implementación del Script DDL</h>
                <p>Desarrollamos un script SQL para implementar la base de datos en MySQL.</p>
                
                <h>Preparación y Carga de Datos</h>
                <p>Preparamos y cargamos datos base y complementarios en la base de datos MySQL.</p>
                
                <h>Generación de un Archivo CSV</h>
                <p>Creamos un archivo CSV con todas las variables relevantes para análisis.</p>
                
                <p>El resultado esperado es una base de datos MySQL completamente implementada y cargada con los datos finales, lista para realizar análisis detallados. Esta base de datos permitirá realizar análisis de tendencias, geográficos, demográficos y de correlación, proporcionando insights valiosos sobre las detenciones a lo largo de los años.</p>
            </div>
        </div>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.0/papaparse.min.js"></script>


</body>

</html>